@model IEnumerable<Service.DTO.IdentityDTO>

<h2>Список пользователей</h2>
@if (User.Identity.IsAuthenticated && (User.IsInRole("SSTU_Deanery") || User.IsInRole("SSTU_Administrator")))
{
    <p>
        @Html.ActionLink("Создать", "Create", routeValues: null, htmlAttributes: new { @class = "link" })
    </p>
}
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.GUID)
        </th>
        <th>
            @Html.Label("Имя")
        </th>
        <th>
            @Html.Label("Фамилия")
        </th>
        <th>
            @Html.Label("Отчество")
        </th>
        <th>
            @Html.Label("Пол")
        </th>
        <th>
            @Html.Label("День рождение")
        </th>
        <th>
            @Html.Label("Страна")
        </th>
        <th>
            @Html.Label("Город")
        </th>
        <th>
            @Html.Label("Телефон")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
            @Html.Label("Факультет")
        </th>
        <th>
            @Html.Label("Группа")
        </th>
        <th>
            @Html.Label("Статус")
        </th>
        <th>
            @Html.Label("Роль")
        </th>
        @if (User.Identity.IsAuthenticated && (User.IsInRole("SSTU_Deanery") || User.IsInRole("SSTU_Administrator")))
        {
            <th>
                @Html.Label("Действия")
            </th>
        }
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.ActionLink(item.GUID, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Name))
                {
                @Html.ActionLink(item.Name, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Surname))
                {
                @Html.ActionLink(item.Surname, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Midname))
                {
                @Html.ActionLink(item.Midname, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (item.Gender != null)
                {
                    if ((bool)item.Gender)
                    {
                    @Html.ActionLink("Мужской", "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                    }
                    else
                    {
                    @Html.ActionLink("Женский", "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                    }
                }
            </td>
            <td>                
                @if (item.Birthdate.Date != DateTime.Now.Date)
                {
                    @Html.ActionLink(item.Birthdate.ToString(), "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Country))
                {
                @Html.ActionLink(item.Country, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.City))
                {
                @Html.ActionLink(item.City, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Phone))
                {
                @Html.ActionLink(item.Phone, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Email))
                {
                @Html.ActionLink(item.Email, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Department))
                {
                @Html.ActionLink(item.Department, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (item.Group != null)
                {
                @Html.ActionLink(item.Group, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @if (!string.IsNullOrEmpty(item.Status))
                {
                @Html.ActionLink(item.Status, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
                }
            </td>
            <td>
                @Html.ActionLink(item.Role, "Details", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "item link" })
            </td>
            @if (User.Identity.IsAuthenticated && (User.IsInRole("SSTU_Deanery") || User.IsInRole("SSTU_Administrator")))
            {
                <td>
                    @Html.ActionLink("Редактировать", "Edit", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "link" })
                    @Html.ActionLink("Удалить", "Delete", routeValues: new { id = item.ID }, htmlAttributes: new { @class = "link" })
                </td>
            }
        </tr>
    }
</table>
<div id="dialog" class="modal fade">
    <div id="content" class="modal-dialog"></div>
</div>